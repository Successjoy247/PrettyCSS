<html>
<head>
<title>PrettyCSS - Sample In-Browser Version</title>
<script type="text/javascript" src="bundle.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
$(function () {
	var lastContent = '';
	var prettycss = require('./prettycss');
	var $cssIn = $('#cssIn');
	var $cssOut = $('#cssOut');
	var setFlag = function () {
		$cssIn.data('prettycss-dirty', true);
	};
	var update = function () {
		if (! $cssIn.data('prettycss-dirty')) {
			return;
		}

		$cssIn.data('prettycss-dirty', '');
		var content = $cssIn.val();

		if (content == lastContent) {
			return;
		}

		lastContent = content;
		var pp = prettycss.parse(content);
		$cssOut.val(pp.toString());
	};

	window.setInterval(update, 100);
	$cssIn.change(setFlag).keypress(setFlag).keyup(setFlag).keydown(setFlag);
	$cssIn.tabby();
});
</script>
<style type="text/css">
</style>
</head>
<body>
<table width="960" align="center" border=0 cellpadding=0 cellspacing=0>
<tr><td width="460">
	<h1>Before</h1>
	<textarea style="width: 100%; height: 30em" id="cssIn"></textarea>
</td>
<td width="40"></td>
<td>
	<h1>After</h1>
	<textarea style="width: 100%; height: 30em" id="cssOut" readonly="true"></textarea>
</td></tr>
</body>
</html>
